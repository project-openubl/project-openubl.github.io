"use strict";(self.webpackChunkproject_openubl=self.webpackChunkproject_openubl||[]).push([[8689],{3905:function(e,n,c){c.d(n,{Zo:function(){return s},kt:function(){return p}});var t=c(7294);function a(e,n,c){return n in e?Object.defineProperty(e,n,{value:c,enumerable:!0,configurable:!0,writable:!0}):e[n]=c,e}function i(e,n){var c=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),c.push.apply(c,t)}return c}function o(e){for(var n=1;n<arguments.length;n++){var c=null!=arguments[n]?arguments[n]:{};n%2?i(Object(c),!0).forEach((function(n){a(e,n,c[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(c)):i(Object(c)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(c,n))}))}return e}function r(e,n){if(null==e)return{};var c,t,a=function(e,n){if(null==e)return{};var c,t,a={},i=Object.keys(e);for(t=0;t<i.length;t++)c=i[t],n.indexOf(c)>=0||(a[c]=e[c]);return a}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(t=0;t<i.length;t++)c=i[t],n.indexOf(c)>=0||Object.prototype.propertyIsEnumerable.call(e,c)&&(a[c]=e[c])}return a}var u=t.createContext({}),l=function(e){var n=t.useContext(u),c=n;return e&&(c="function"==typeof e?e(n):o(o({},n),e)),c},s=function(e){var n=l(e.components);return t.createElement(u.Provider,{value:n},e.children)},m={inlineCode:"code",wrapper:function(e){var n=e.children;return t.createElement(t.Fragment,{},n)}},d=t.forwardRef((function(e,n){var c=e.components,a=e.mdxType,i=e.originalType,u=e.parentName,s=r(e,["components","mdxType","originalType","parentName"]),d=l(c),p=a,b=d["".concat(u,".").concat(p)]||d[p]||m[p]||i;return c?t.createElement(b,o(o({ref:n},s),{},{components:c})):t.createElement(b,o({ref:n},s))}));function p(e,n){var c=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var i=c.length,o=new Array(i);o[0]=d;var r={};for(var u in n)hasOwnProperty.call(n,u)&&(r[u]=n[u]);r.originalType=e,r.mdxType="string"==typeof e?e:a,o[1]=r;for(var l=2;l<i;l++)o[l]=c[l];return t.createElement.apply(null,o)}return t.createElement.apply(null,c)}d.displayName="MDXCreateElement"},2489:function(e,n,c){c.r(n),c.d(n,{assets:function(){return s},contentTitle:function(){return u},default:function(){return p},frontMatter:function(){return r},metadata:function(){return l},toc:function(){return m}});var t=c(7462),a=c(3366),i=(c(7294),c(3905)),o=["components"],r={title:"Crear XML"},u=void 0,l={unversionedId:"xbuilder/create-xml",id:"xbuilder/create-xml",title:"Crear XML",description:"Debes de recordar que la creaci\xf3n de un XML dependen de tres componentes principales:",source:"@site/docs/04-xbuilder/04-create-xml.md",sourceDirName:"04-xbuilder",slug:"/xbuilder/create-xml",permalink:"/docs/xbuilder/create-xml",editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/04-xbuilder/04-create-xml.md",tags:[],version:"current",sidebarPosition:4,frontMatter:{title:"Crear XML"},sidebar:"tutorialSidebar",previous:{title:"Conceptos b\xe1sicos",permalink:"/docs/xbuilder/concepts"},next:{title:"Firmar XML",permalink:"/docs/xbuilder/sign-xml"}},s={},m=[{value:"Crea los componentes necesarios",id:"crea-los-componentes-necesarios",level:2},{value:"Crea un POJO/Input",id:"crea-un-pojoinput",level:3},{value:"Crear un Config",id:"crear-un-config",level:3},{value:"Crea un SystemClock",id:"crea-un-systemclock",level:3},{value:"Crea el XML",id:"crea-el-xml",level:2}],d={toc:m};function p(e){var n=e.components,r=(0,a.Z)(e,o);return(0,i.kt)("wrapper",(0,t.Z)({},d,r,{components:n,mdxType:"MDXLayout"}),(0,i.kt)("p",null,"Debes de recordar que la creaci\xf3n de un XML dependen de tres componentes principales:"),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"img",src:c(2836).Z,title:"XBuilder concept equation",width:"615",height:"100"})),(0,i.kt)("h2",{id:"crea-los-componentes-necesarios"},"Crea los componentes necesarios"),(0,i.kt)("h3",{id:"crea-un-pojoinput"},"Crea un POJO/Input"),(0,i.kt)("p",null,"Debes de decidir que tipo de XML deseas crear y seleccionar uno de los ",(0,i.kt)("inlineCode",{parentName:"p"},"Builder")," disponibles:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"InvoiceInputModel.Builder"),(0,i.kt)("li",{parentName:"ul"},"CreditNoteInputModel.Builder"),(0,i.kt)("li",{parentName:"ul"},"DebitNoteInputModel.Builder"),(0,i.kt)("li",{parentName:"ul"},"VoidedDocumentInputModel.Builder"),(0,i.kt)("li",{parentName:"ul"},"SummaryDocumentInputModel.Builder, etc.")),(0,i.kt)("p",null,"Una vez seleccionado el ",(0,i.kt)("inlineCode",{parentName:"p"},"Builder")," correcto ya puedes empezar a crear un Input/POJO"),(0,i.kt)("p",null,"Cada ",(0,i.kt)("inlineCode",{parentName:"p"},"Builder")," es diferente y requiere diferente informaci\xf3n. Por ejemplo si queremos crear una factura podemos hacer lo siguiente:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-java"},'InvoiceInputModel input = InvoiceInputModel.Builder.anInvoiceInputModel()\n        .withSerie("F001")\n        .withNumero(1)\n        .withProveedor(ProveedorInputModel.Builder.aProveedorInputModel()\n                .withRuc("12345678912")\n                .withRazonSocial("Softgreen S.A.C.")\n                .build()\n        )\n        .withCliente(ClienteInputModel.Builder.aClienteInputModel()\n                .withNombre("Carlos Feria")\n                .withNumeroDocumentoIdentidad("12121212121")\n                .withTipoDocumentoIdentidad(Catalog6.RUC.toString())\n                .build()\n        )\n        .withDetalle(Arrays.asList(\n                DocumentLineInputModel.Builder.aDocumentLineInputModel()\n                        .withDescripcion("Item1")\n                        .withCantidad(new BigDecimal(10))\n                        .withPrecioUnitario(new BigDecimal(100))\n                        .withUnidadMedida("KGM")\n                        .build(),\n                DocumentLineInputModel.Builder.aDocumentLineInputModel()\n                        .withDescripcion("Item2")\n                        .withCantidad(new BigDecimal(10))\n                        .withPrecioUnitario(new BigDecimal(100))\n                        .withUnidadMedida("KGM")\n                        .build())\n        )\n        .build();\n')),(0,i.kt)("h3",{id:"crear-un-config"},"Crear un Config"),(0,i.kt)("p",null,"Crea una clase que implemente la interfaz ",(0,i.kt)("inlineCode",{parentName:"p"},"io.github.project.openubl.xmlbuilderlib.config.Config"),":"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-java"},'public class MyCustomConfig implements Config {\n\n    private BigDecimal igv;\n    private BigDecimal ivap;\n    private String defaultMoneda;\n    private String defaultUnidadMedida;\n    private Catalog9 defaultTipoNotaCredito;\n    private Catalog10 defaultTipoNotaDebito;\n    private BigDecimal defaultIcb;\n    private Catalog7 defaultTipoIgv;\n\n    public DefaultConfig() {\n        this.defaultMoneda = "PEN";\n        this.defaultUnidadMedida = "NIU";\n        this.igv = new BigDecimal("0.18");\n        this.ivap = new BigDecimal("0.04");\n        this.defaultIcb = new BigDecimal("0.2");\n        ...\n    }\n}\n')),(0,i.kt)("h3",{id:"crea-un-systemclock"},"Crea un SystemClock"),(0,i.kt)("p",null,"Crea una clase que implemente la interfaz ",(0,i.kt)("inlineCode",{parentName:"p"},"io.github.project.openubl.xmlbuilderlib.clock.SystemClock"),":"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-java"},' public class MyCustomClock implements SystemClock {\n    @Override\n    public TimeZone getTimeZone() {\n        return TimeZone.getTimeZone("America/Lima");\n    }\n\n    @Override\n    public Calendar getCalendarInstance() {\n        return Calendar.getInstance();\n    }\n}\n')),(0,i.kt)("h2",{id:"crea-el-xml"},"Crea el XML"),(0,i.kt)("p",null,"Un XML es creado usando ",(0,i.kt)("inlineCode",{parentName:"p"},"DocumentManager.createXML")," por ejemplo:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-java",metastring:"{8}","{8}":!0},'Config config = new MyCustomConfig();\nSystemClock systemClock = new MyCustomClock();\n\n// Create Invoice\nDocumentWrapper<InvoiceOutputModel> result = DocumentManager.createXML(input, config, systemClock); // El "input" es generado arriba\n\nInvoiceOutputModel output = result.getOutput(); // XML Var values\nString xml = result.getXml(); // XML content\n')),(0,i.kt)("p",null,"The contenido de la variable ",(0,i.kt)("inlineCode",{parentName:"p"},"xml")," ser\xe1 parecido a:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-xml"},'<?xml version="1.0" encoding="ISO-8859-1"?>\n<Invoice xmlns="urn:oasis:names:specification:ubl:schema:xsd:Invoice-2"\n         xmlns:cac="urn:oasis:names:specification:ubl:schema:xsd:CommonAggregateComponents-2"\n         xmlns:cbc="urn:oasis:names:specification:ubl:schema:xsd:CommonBasicComponents-2"\n         xmlns:ccts="urn:un:unece:uncefact:documentation:2"\n         xmlns:cec="urn:oasis:names:specification:ubl:schema:xsd:CommonExtensionComponents-2"\n         xmlns:ds="http://www.w3.org/2000/09/xmldsig#"\n         xmlns:ext="urn:oasis:names:specification:ubl:schema:xsd:CommonExtensionComponents-2"\n         xmlns:qdt="urn:oasis:names:specification:ubl:schema:xsd:QualifiedDatatypes-2"\n         xmlns:sac="urn:sunat:names:specification:ubl:peru:schema:xsd:SunatAggregateComponents-1"\n         xmlns:udt="urn:un:unece:uncefact:data:specification:UnqualifiedDataTypesSchemaModule:2"\n         xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">\n    <ext:UBLExtensions>\n        <ext:UBLExtension>\n            <ext:ExtensionContent/>\n        </ext:UBLExtension>\n    </ext:UBLExtensions>\n    <cbc:UBLVersionID>2.1</cbc:UBLVersionID>\n    <cbc:CustomizationID>2.0</cbc:CustomizationID>\n    <cbc:ID>F001-1</cbc:ID>\n    <cbc:IssueDate>2019-12-24</cbc:IssueDate>\n    <cbc:IssueTime>20:30:59</cbc:IssueTime>\n    <cbc:InvoiceTypeCode listAgencyName="PE:SUNAT" listID="0101" listName="Tipo de Documento"\n                         listURI="urn:pe:gob:sunat:cpe:see:gem:catalogos:catalogo01">01\n    </cbc:InvoiceTypeCode>\n    <cbc:DocumentCurrencyCode listAgencyName="United Nations Economic Commission for Europe" listID="ISO 4217 Alpha"\n                              listName="Currency">PEN\n    </cbc:DocumentCurrencyCode>\n    <cac:Signature>\n        <cbc:ID>12345678912</cbc:ID>\n        <cac:SignatoryParty>\n            <cac:PartyIdentification>\n                <cbc:ID>12345678912</cbc:ID>\n            </cac:PartyIdentification>\n            <cac:PartyName>\n                <cbc:Name>Softgreen S.A.C.</cbc:Name>\n            </cac:PartyName>\n        </cac:SignatoryParty>\n        <cac:DigitalSignatureAttachment>\n            <cac:ExternalReference>\n                <cbc:URI>#PROJECT-OPENUBL-SIGN</cbc:URI>\n            </cac:ExternalReference>\n        </cac:DigitalSignatureAttachment>\n    </cac:Signature>\n    <cac:AccountingSupplierParty>\n        <cac:Party>\n            <cac:PartyIdentification>\n                <cbc:ID schemeAgencyName="PE:SUNAT" schemeID="6"\n                        schemeName="Documento de Identidad"\n                        schemeURI="urn:pe:gob:sunat:cpe:see:gem:catalogos:catalogo06">12345678912\n                </cbc:ID>\n            </cac:PartyIdentification>\n            <cac:PartyLegalEntity>\n                <cbc:RegistrationName>Softgreen S.A.C.</cbc:RegistrationName>\n            </cac:PartyLegalEntity>\n        </cac:Party>\n    </cac:AccountingSupplierParty>\n    <cac:AccountingCustomerParty>\n        <cac:Party>\n            <cac:PartyIdentification>\n                <cbc:ID schemeAgencyName="PE:SUNAT" schemeID="6"\n                        schemeName="Documento de Identidad"\n                        schemeURI="urn:pe:gob:sunat:cpe:see:gem:catalogos:catalogo06">12121212121\n                </cbc:ID>\n            </cac:PartyIdentification>\n            <cac:PartyLegalEntity>\n                <cbc:RegistrationName>Carlos Feria</cbc:RegistrationName>\n            </cac:PartyLegalEntity>\n        </cac:Party>\n    </cac:AccountingCustomerParty>\n    <cac:TaxTotal>\n        <cbc:TaxAmount currencyID="PEN">360</cbc:TaxAmount>\n        <cac:TaxSubtotal>\n            <cbc:TaxableAmount currencyID="PEN">2000</cbc:TaxableAmount>\n            <cbc:TaxAmount currencyID="PEN">360</cbc:TaxAmount>\n            <cac:TaxCategory>\n                <cbc:ID schemeAgencyName="United Nations Economic Commission for Europe" schemeID="UN/ECE 5305"\n                        schemeName="Tax Category Identifie">S\n                </cbc:ID>\n                <cac:TaxScheme>\n                    <cbc:ID schemeAgencyName="PE:SUNAT" schemeID="UN/ECE 5153" schemeName="Codigo de tributos">1000\n                    </cbc:ID>\n                    <cbc:Name>IGV</cbc:Name>\n                    <cbc:TaxTypeCode>VAT</cbc:TaxTypeCode>\n                </cac:TaxScheme>\n            </cac:TaxCategory>\n        </cac:TaxSubtotal>\n    </cac:TaxTotal>\n    <cac:LegalMonetaryTotal>\n        <cbc:LineExtensionAmount currencyID="PEN">2000</cbc:LineExtensionAmount>\n        <cbc:TaxInclusiveAmount currencyID="PEN">2360</cbc:TaxInclusiveAmount>\n        <cbc:PayableAmount currencyID="PEN">2360</cbc:PayableAmount>\n    </cac:LegalMonetaryTotal>\n    <cac:InvoiceLine>\n        <cbc:ID>1</cbc:ID>\n        <cbc:InvoicedQuantity unitCode="KGM" unitCodeListAgencyName="United Nations Economic Commission for Europe"\n                              unitCodeListID="UN/ECE rec 20">10\n        </cbc:InvoicedQuantity>\n        <cbc:LineExtensionAmount currencyID="PEN">1000</cbc:LineExtensionAmount>\n        <cac:PricingReference>\n            <cac:AlternativeConditionPrice>\n                <cbc:PriceAmount currencyID="PEN">118</cbc:PriceAmount>\n                <cbc:PriceTypeCode listAgencyName="PE:SUNAT" listName="Tipo de Precio"\n                                   listURI="urn:pe:gob:sunat:cpe:see:gem:catalogos:catalogo16">01\n                </cbc:PriceTypeCode>\n            </cac:AlternativeConditionPrice>\n        </cac:PricingReference>\n        <cac:TaxTotal>\n            <cbc:TaxAmount currencyID="PEN">180</cbc:TaxAmount>\n            <cac:TaxSubtotal>\n                <cbc:TaxableAmount currencyID="PEN">1000</cbc:TaxableAmount>\n                <cbc:TaxAmount currencyID="PEN">180</cbc:TaxAmount>\n                <cac:TaxCategory>\n                    <cbc:ID schemeAgencyName="United Nations Economic Commission for Europe" schemeID="UN/ECE 5305"\n                            schemeName="Tax Category Identifier">S\n                    </cbc:ID>\n                    <cbc:Percent>18</cbc:Percent>\n                    <cbc:TaxExemptionReasonCode listAgencyName="PE:SUNAT"\n                                                listName="Afectacion del IGV"\n                                                listURI="urn:pe:gob:sunat:cpe:see:gem:catalogos:catalogo07">10\n                    </cbc:TaxExemptionReasonCode>\n                    <cac:TaxScheme>\n                        <cbc:ID schemeAgencyName="PE:SUNAT" schemeID="UN/ECE 5153" schemeName="Codigo de tributos">\n                            1000\n                        </cbc:ID>\n                        <cbc:Name>IGV</cbc:Name>\n                        <cbc:TaxTypeCode>VAT</cbc:TaxTypeCode>\n                    </cac:TaxScheme>\n                </cac:TaxCategory>\n            </cac:TaxSubtotal>\n        </cac:TaxTotal>\n        <cac:Item>\n            <cbc:Description>Item1</cbc:Description>\n        </cac:Item>\n        <cac:Price>\n            <cbc:PriceAmount currencyID="PEN">100</cbc:PriceAmount>\n        </cac:Price>\n    </cac:InvoiceLine>\n    <cac:InvoiceLine>\n        <cbc:ID>2</cbc:ID>\n        <cbc:InvoicedQuantity unitCode="KGM" unitCodeListAgencyName="United Nations Economic Commission for Europe"\n                              unitCodeListID="UN/ECE rec 20">10\n        </cbc:InvoicedQuantity>\n        <cbc:LineExtensionAmount currencyID="PEN">1000</cbc:LineExtensionAmount>\n        <cac:PricingReference>\n            <cac:AlternativeConditionPrice>\n                <cbc:PriceAmount currencyID="PEN">118</cbc:PriceAmount>\n                <cbc:PriceTypeCode listAgencyName="PE:SUNAT" listName="Tipo de Precio"\n                                   listURI="urn:pe:gob:sunat:cpe:see:gem:catalogos:catalogo16">01\n                </cbc:PriceTypeCode>\n            </cac:AlternativeConditionPrice>\n        </cac:PricingReference>\n        <cac:TaxTotal>\n            <cbc:TaxAmount currencyID="PEN">180</cbc:TaxAmount>\n            <cac:TaxSubtotal>\n                <cbc:TaxableAmount currencyID="PEN">1000</cbc:TaxableAmount>\n                <cbc:TaxAmount currencyID="PEN">180</cbc:TaxAmount>\n                <cac:TaxCategory>\n                    <cbc:ID schemeAgencyName="United Nations Economic Commission for Europe" schemeID="UN/ECE 5305"\n                            schemeName="Tax Category Identifier">S\n                    </cbc:ID>\n                    <cbc:Percent>18</cbc:Percent>\n                    <cbc:TaxExemptionReasonCode listAgencyName="PE:SUNAT"\n                                                listName="Afectacion del IGV"\n                                                listURI="urn:pe:gob:sunat:cpe:see:gem:catalogos:catalogo07">10\n                    </cbc:TaxExemptionReasonCode>\n                    <cac:TaxScheme>\n                        <cbc:ID schemeAgencyName="PE:SUNAT" schemeID="UN/ECE 5153" schemeName="Codigo de tributos">\n                            1000\n                        </cbc:ID>\n                        <cbc:Name>IGV</cbc:Name>\n                        <cbc:TaxTypeCode>VAT</cbc:TaxTypeCode>\n                    </cac:TaxScheme>\n                </cac:TaxCategory>\n            </cac:TaxSubtotal>\n        </cac:TaxTotal>\n        <cac:Item>\n            <cbc:Description>Item2</cbc:Description>\n        </cac:Item>\n        <cac:Price>\n            <cbc:PriceAmount currencyID="PEN">100</cbc:PriceAmount>\n        </cac:Price>\n    </cac:InvoiceLine>\n</Invoice>\n')))}p.isMDXComponent=!0},2836:function(e,n,c){n.Z=c.p+"assets/images/concepts-equation-72f76f9c8fa662735cb81335cb29f3aa.svg"}}]);