(self.webpackChunkproject_openubl=self.webpackChunkproject_openubl||[]).push([[6467],{3905:function(e,t,n){"use strict";n.d(t,{Zo:function(){return c},kt:function(){return d}});var r=n(67294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function u(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var l=r.createContext({}),s=function(e){var t=r.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},c=function(e){var t=s(e.components);return r.createElement(l.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},m=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,o=e.originalType,l=e.parentName,c=u(e,["components","mdxType","originalType","parentName"]),m=s(n),d=a,h=m["".concat(l,".").concat(d)]||m[d]||p[d]||o;return n?r.createElement(h,i(i({ref:t},c),{},{components:n})):r.createElement(h,i({ref:t},c))}));function d(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=n.length,i=new Array(o);i[0]=m;var u={};for(var l in t)hasOwnProperty.call(t,l)&&(u[l]=t[l]);u.originalType=e,u.mdxType="string"==typeof e?e:a,i[1]=u;for(var s=2;s<o;s++)i[s]=n[s];return r.createElement.apply(null,i)}return r.createElement.apply(null,n)}m.displayName="MDXCreateElement"},82924:function(e,t,n){"use strict";var r=n(67294).createContext(void 0);t.Z=r},79443:function(e,t,n){"use strict";var r=(0,n(67294).createContext)(void 0);t.Z=r},85350:function(e,t,n){"use strict";var r=n(67294),a=n(82924);t.Z=function(){var e=(0,r.useContext)(a.Z);if(null==e)throw new Error('"useThemeContext" is used outside of "Layout" component. Please see https://docusaurus.io/docs/api/themes/configuration#usethemecontext.');return e}},2304:function(e,t,n){"use strict";n.r(t),n.d(t,{contentTitle:function(){return P},default:function(){return I},frontMatter:function(){return C},metadata:function(){return E},toc:function(){return O}});var r=n(83117),a=n(80102),o=n(67294),i=n(3905),u=n(72389),l=n(79443);var s=function(){var e=(0,o.useContext)(l.Z);if(null==e)throw new Error('"useUserPreferencesContext" is used outside of "Layout" component.');return e},c=n(89521),p=n(86010),m="tabItem_1uMI";function d(e){var t,n,r,a=e.lazy,i=e.block,u=e.defaultValue,l=e.values,d=e.groupId,h=e.className,f=o.Children.map(e.children,(function(e){if((0,o.isValidElement)(e)&&void 0!==e.props.value)return e;throw new Error("Docusaurus error: Bad <Tabs> child <"+("string"==typeof e.type?e.type:e.type.name)+'>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.')})),b=null!=l?l:f.map((function(e){var t=e.props;return{value:t.value,label:t.label}})),v=(0,c.lx)(b,(function(e,t){return e.value===t.value}));if(v.length>0)throw new Error('Docusaurus error: Duplicate values "'+v.map((function(e){return e.value})).join(", ")+'" found in <Tabs>. Every value needs to be unique.');var y=null===u?u:null!=(t=null!=u?u:null==(n=f.find((function(e){return e.props.default})))?void 0:n.props.value)?t:null==(r=f[0])?void 0:r.props.value;if(null!==y&&!b.some((function(e){return e.value===y})))throw new Error('Docusaurus error: The <Tabs> has a defaultValue "'+y+'" but none of its children has the corresponding value. Available values are: '+b.map((function(e){return e.value})).join(", ")+". If you intend to show no default tab, use defaultValue={null} instead.");var g=s(),k=g.tabGroupChoices,w=g.setTabGroupChoices,T=(0,o.useState)(y),N=T[0],x=T[1],C=[],P=(0,c.o5)().blockElementScrollPositionUntilNextRender;if(null!=d){var E=k[d];null!=E&&E!==N&&b.some((function(e){return e.value===E}))&&x(E)}var O=function(e){var t=e.currentTarget,n=C.indexOf(t),r=b[n].value;r!==N&&(P(t),x(r),null!=d&&w(d,r))},j=function(e){var t,n=null;switch(e.key){case"ArrowRight":var r=C.indexOf(e.currentTarget)+1;n=C[r]||C[0];break;case"ArrowLeft":var a=C.indexOf(e.currentTarget)-1;n=C[a]||C[C.length-1]}null==(t=n)||t.focus()};return o.createElement("div",{className:"tabs-container"},o.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,p.Z)("tabs",{"tabs--block":i},h)},b.map((function(e){var t=e.value,n=e.label;return o.createElement("li",{role:"tab",tabIndex:N===t?0:-1,"aria-selected":N===t,className:(0,p.Z)("tabs__item",m,{"tabs__item--active":N===t}),key:t,ref:function(e){return C.push(e)},onKeyDown:j,onFocus:O,onClick:O},null!=n?n:t)}))),a?(0,o.cloneElement)(f.filter((function(e){return e.props.value===N}))[0],{className:"margin-vert--md"}):o.createElement("div",{className:"margin-vert--md"},f.map((function(e,t){return(0,o.cloneElement)(e,{key:t,hidden:e.props.value!==N})}))))}function h(e){var t=(0,u.Z)();return o.createElement(d,(0,r.Z)({key:String(t)},e))}var f=function(e){var t=e.children,n=e.hidden,r=e.className;return o.createElement("div",{role:"tabpanel",hidden:n,className:r},t)},b=n(28084),v=n(85350),y=n(87379),g=n(72361),k=n(25108),w=["id","example","pointer"],T=function(e){var t=e.id,n=e.example,i=e.pointer,u=(0,a.Z)(e,w),l=(0,v.Z)().isDarkTheme,s=(0,b.useAllPluginInstancesData)("docusaurus-plugin-redoc"),c=(0,b.usePluginData)("docusaurus-theme-redoc"),m=c.lightTheme,d=c.darkTheme,h=c.redocOptions,f=l?d:m,T=(0,o.useMemo)((function(){var e,n=s[t]||(null==(e=Object.values(s).filter((function(e){return"object"===e.type})))?void 0:e[0]),r=n.specUrl,a=n.content;return"object"===n.type&&a?new g.AppStore(a,r,Object.assign({},h,{theme:f})):(k.warn({allData:s},"[Redocusaurus] ApiSchems needs a spec file to render"),null)}),[t,s,h,f]);return T?o.createElement(y.ThemeProvider,{theme:T.options.theme},o.createElement("div",{className:(0,p.Z)(["redocusaurus","redocusaurus-schema",n?null:"hide-example"])},o.createElement(g.SchemaDefinition,(0,r.Z)({parser:T.spec.parser,options:T.options,schemaRef:i},u)))):null};T.defaultProps={example:!1};var N=T,x=["components"],C={title:"API Integration"},P=void 0,E={unversionedId:"searchpe/api-integration",id:"searchpe/api-integration",isDocsHomePage:!1,title:"API Integration",description:"Any software can consume Searchpe through REST.",source:"@site/i18n/en/docusaurus-plugin-content-docs/current/06-searchpe/05-api-integration.mdx",sourceDirName:"06-searchpe",slug:"/searchpe/api-integration",permalink:"/en/docs/searchpe/api-integration",editUrl:"https://github.com/project-openubl/website/edit/master/docs/06-searchpe/05-api-integration.mdx",tags:[],version:"current",sidebarPosition:5,frontMatter:{title:"API Integration"},sidebar:"tutorialSidebar",previous:{title:"Web Console",permalink:"/en/docs/searchpe/web-console"},next:{title:"Migrating from v2 to v3",permalink:"/en/docs/searchpe/migration"}},O=[{value:"API",id:"api",children:[],level:2},{value:"Security",id:"security",children:[],level:2},{value:"API consumption",id:"api-consumption",children:[{value:"DNI/RUC query",id:"dniruc-query",children:[],level:3}],level:2}],j={toc:O};function I(e){var t=e.components,o=(0,a.Z)(e,x);return(0,i.kt)("wrapper",(0,r.Z)({},j,o,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("p",null,"Any software can consume Searchpe through REST."),(0,i.kt)("h2",{id:"api"},"API"),(0,i.kt)("p",null,"You can view all the available REST endpoint in:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{href:"/api/searchpe",target:"_blank"},"Openapi"))),(0,i.kt)("h2",{id:"security"},"Security"),(0,i.kt)("p",null,"All of the Searchpe endpoints are protected and can only be consumed using correct credentials. ",(0,i.kt)("a",{parentName:"p",href:"https://en.wikipedia.org/wiki/Basic_access_authentication"},"Basic access authentication")," is the method to use when consuming the REST endpoints."),(0,i.kt)("p",null,"Any HTTP request must contain the Header ",(0,i.kt)("inlineCode",{parentName:"p"},"Authorization: Basic <credentials>")," where ",(0,i.kt)("inlineCode",{parentName:"p"},"<credentials>")," contains the user and password separated by ",(0,i.kt)("inlineCode",{parentName:"p"},":")," and encrypted in ",(0,i.kt)("a",{parentName:"p",href:"https://en.wikipedia.org/wiki/Base64"},"Base 64"),'. For example, if the user is "myUsername" and the password is "myPassword" then:'),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"Join the user and password separated by ",(0,i.kt)("inlineCode",{parentName:"li"},":"),". Taking our example ",(0,i.kt)("inlineCode",{parentName:"li"},"myUsername:myPassword")),(0,i.kt)("li",{parentName:"ol"},"Encrypt ",(0,i.kt)("inlineCode",{parentName:"li"},"myUsername:myPassword")," on base 64. Taking our example ",(0,i.kt)("inlineCode",{parentName:"li"},"bXlVc2VybbmFtZTpteVBhc3N3b3Jk")),(0,i.kt)("li",{parentName:"ol"},"Consume Searchpe including HTTP Header ",(0,i.kt)("inlineCode",{parentName:"li"},"Authorization: Basic bXlVc2VybmFtZTpteVBhc3N3b3Jk"))),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"img",src:n(68466).Z,title:"Basic Auth"})),(0,i.kt)("h2",{id:"api-consumption"},"API consumption"),(0,i.kt)("p",null,"You can use any programming language to consume the Searchpe API all you need to keep in mind is always to send your credentials on each request as explained in the previous section."),(0,i.kt)("p",null,"Look at some examples of how to consume APIs."),(0,i.kt)(h,{mdxType:"Tabs"},(0,i.kt)(f,{value:"javascript",label:"Javascript",default:!0,mdxType:"TabItem"},(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},'fetch(\'http://localhost:8180/api/contribuyentes/{numeroDocumento}\', {\n  method: "GET",\n  headers: {\n    "Content-type": "application/json",\n    "Authorization": "Basic bXlVc2VybmFtZTpteVBhc3N3b3Jk",\n  }\n})\n.then(response => console.log(response));\n.catch(error => console.log(error));\n'))),(0,i.kt)(f,{value:"java",label:"Java",mdxType:"TabItem"},(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-java"},'HttpClient client = HttpClients.custom().build();\nHttpUriRequest request = RequestBuilder.get()\n  .setUri("http://localhost:8180/api/contribuyentes/{numeroDocumento}")\n  .setHeader("Content-type", "application/json")\n  .setHeader("Authorization", "Basic bXlVc2VybmFtZTpteVBhc3N3b3Jk")\n  .build();\nclient.execute(request);\n'))),(0,i.kt)(f,{value:"php",label:"PHP",mdxType:"TabItem"},(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-php"},"$httpClient = HttpClient::create();\n$response = $httpClient->request('GET', 'http://localhost:8180/api/contribuyentes/{numeroDocumento}', [\n    'headers' => [\n        'Content-type' => 'application/json',\n        'Authorization' => 'Basic bXlVc2VybmFtZTpteVBhc3N3b3Jk'\n    ]\n]);\n")))),(0,i.kt)("h3",{id:"dniruc-query"},"DNI/RUC query"),(0,i.kt)("p",null,"Probably the most important endpoint is ",(0,i.kt)("inlineCode",{parentName:"p"},"/api/contributors/{numeroDocumento}")," as it is used to consult natural or legal persons through their number of DNI or RUC."),(0,i.kt)("p",null,"You can use the example of the previous section to consume this endpoint. The server response must be an object that has the following form:"),(0,i.kt)(N,{pointer:"#/components/schemas/ContribuyenteEntity",example:!0,mdxType:"ApiSchema"}))}I.isMDXComponent=!0},68466:function(e,t,n){"use strict";t.Z=n.p+"assets/images/searchpe-basic-auth-c6272e2ae5dee24415802502882c5dc1.png"},15101:function(){},23197:function(){},52361:function(){},94616:function(){},49702:function(){}}]);